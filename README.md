# Фильтр желтушных новостей

Проект представляет собой веб-сервер, принимающий на вход список ссылок на новостные статьи и возвращающий рейтинг их "желтушности".

Пока поддерживается только один новостной сайт - [ИНОСМИ.РУ](https://inosmi.ru/). Для него разработан специальный адаптер, умеющий выделять текст статьи на фоне остальной HTML разметки. Для других новостных сайтов потребуются новые адаптеры, все они будут находиться в каталоге `adapters`. Туда же помещен код для сайта ИНОСМИ.РУ: `adapters/inosmi_ru.py`.

В перспективе можно создать универсальный адаптер, подходящий для всех сайтов, но его разработка будет сложной и потребует дополнительных времени и сил.

## Как установить

Вам понадобится Python версии 3.8. Для установки пакетов рекомендуется создать виртуальное окружение.

Первым шагом установите пакеты:

```python3
pip install -r requirements.txt
```

## Как запустить

```python3
python server.py
```

После запуска сервера вы сможете в браузере задавать запросы вида:
```
http://127.0.0.1:8080/?urls=http://example.com,https://inosmi.ru/politic/20190629/245376799.html,https://inosmi.ru/politic/20190629/245379332.html
```
и получать на странице рейтинг их "желтушности" в следующем виде:
```
[
 {"status": "PARSING_ERROR", "url": "http://example.com", "score": null, "words_count": null},
 {"status": "OK", "url": "https://inosmi.ru/politic/20190629/245376799.html", "score": 0.39, "words_count": 5452},
 {"status": "OK", "url": "https://inosmi.ru/politic/20190629/245379332.html", "score": 0.54, "words_count": 9727}
]
```
Статусы 'status' статей в ответе могут принимать следующие значени:
- `OK` - статья успешно обработана;
- `FETCH_ERROR` - задана несуществующая страница;
- `PARSING_ERROR` - задана страница, которую сервер не умеет парсить;
- `TIMEOUT` - слишком большое время обработки статьи (например, если статья имеет огромный размер).

#### Примечание

Списки "заряженных" слов находятся в файлах папки `data/charged_dict`. В них можно добавлять/удалять слова.

## Как запустить тесты

Для тестирования используется [pytest](https://docs.pytest.org/en/latest/), тестами покрыты фрагменты кода сложные в отладке: articles_processor.py, text_tools.py и адаптеры. Команды для запуска тестов:

```
python -m pytest articles_processor.py
python -m pytest text_tools.py
python -m pytest adapters/inosmi_ru.py
```

## Цели проекта

Код написан в учебных целях. Это урок из курса по веб-разработке — [Девман](https://dvmn.org).
